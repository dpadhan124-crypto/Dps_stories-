<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPS Stories | Premium Audio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Hind:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js" type="module"></script>
    <style>
        body { font-family: 'Hind', sans-serif; background-color: #0f172a; color: #f1f5f9; -webkit-tap-highlight-color: transparent; }
        .premium-bg { background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%); }
        .gold-glow { text-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .glass-card { background: rgba(30, 41, 59, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(251, 191, 36, 0.1); }
        .modal { display: none; position: fixed; z-index: 100; inset: 0; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; padding: 1rem; }
    </style>
</head>
<body class="antialiased premium-bg min-h-screen pb-10">

    <!-- Hero Section -->
    <section class="pt-12 pb-8 px-6 text-center">
        <div class="inline-block p-4 rounded-full bg-yellow-500/10 mb-4 border border-yellow-500/20">
            <span class="text-4xl">ЁЯОз</span>
        </div>
        <h1 class="text-4xl font-bold gold-text mb-2 gold-glow">DPS Stories</h1>
        <p class="text-yellow-500 font-medium tracking-wide mb-6">рдкреНрд░реАрдорд┐рдпрдо рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕рд░реНрд╡рд┐рд╕</p>
        
        <div id="stories-container" class="max-w-md mx-auto bg-slate-800/40 p-4 rounded-2xl border border-slate-700 text-sm leading-relaxed text-gray-300 italic">
            рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...
        </div>
    </section>

    <!-- Subscription Plans -->
    <main class="px-6 space-y-6 max-w-md mx-auto">
        <!-- Standard -->
        <div class="glass-card p-6 rounded-3xl relative overflow-hidden">
            <h3 class="text-xl font-bold mb-1">Standard Plan</h3>
            <p class="text-xs text-gray-400 mb-4">"Daily Thrill"</p>
            <div class="flex items-baseline gap-1 mb-6">
                <span class="text-3xl font-bold">тВ╣<span id="std-price">...</span></span>
                <span class="text-gray-500 text-sm">/ рдорд╣реАрдирд╛</span>
            </div>
            <ul class="text-sm space-y-2 mb-6 text-gray-300">
                <li class="flex items-center gap-2">тЬЕ рд╕рднреА рдкреБрд░рд╛рдиреА рдХрд╣рд╛рдирд┐рдпреЛрдВ рдХрд╛ рдПрдХреНрд╕реЗрд╕</li>
                <li class="flex items-center gap-2">тЬЕ рд░реЛрдЬрд╝рд╛рдирд╛ 1 рдирдпрд╛ рдПрдкрд┐рд╕реЛрдб</li>
            </ul>
            <button onclick="window.location.href='https://t.me/D_padhan'" class="w-full py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-bold transition">рдЕрднреА рдЪреБрдиреЗрдВ</button>
        </div>

        <!-- VIP -->
        <div class="glass-card p-6 rounded-3xl border-2 border-yellow-500 relative shadow-2xl shadow-yellow-500/10">
            <div class="absolute top-0 right-0 bg-yellow-500 text-black px-3 py-1 text-xs font-bold rounded-bl-xl uppercase">Best Value</div>
            <h3 class="text-xl font-bold mb-1">VIP Plan</h3>
            <p class="text-xs text-yellow-500/80 mb-4">"Binge Master"</p>
            <div class="flex items-baseline gap-1 mb-6">
                <span class="text-3xl font-bold text-yellow-500">тВ╣<span id="vip-price">...</span></span>
                <span class="text-gray-500 text-sm">/ рдорд╣реАрдирд╛</span>
            </div>
            <ul class="text-sm space-y-2 mb-6 text-gray-300">
                <li class="flex items-center gap-2 font-semibold">ЁЯМЯ рдлреБрд▓ рдПрдХреНрд╕реЗрд╕ + 5 рдбреЗрд▓реА рдПрдкрд┐рд╕реЛрдбреНрд╕</li>
                <li class="flex items-center gap-2 font-semibold">ЁЯМЯ рд╕рдмрд╕реЗ рддреЗрдЬрд╝реА рд╕реЗ рдХрд╣рд╛рдирд┐рдпрд╛рдБ рдЦрддреНрдо рдХрд░реЗрдВ</li>
            </ul>
            <button onclick="window.location.href='https://t.me/D_padhan'" class="w-full py-4 bg-yellow-500 hover:bg-yellow-400 text-black rounded-xl font-bold transition text-lg">VIP рдПрдХреНрд╕реЗрд╕ рд▓реЗрдВ</button>
        </div>
    </main>

    <!-- Payment -->
    <section class="mt-10 px-6 max-w-md mx-auto">
        <div class="glass-card p-6 rounded-3xl border-dashed border-2 border-yellow-500/30 text-center">
            <h2 class="font-bold mb-4 flex items-center justify-center gap-2">ЁЯТ│ рдкреЗрдореЗрдВрдЯ рдФрд░ рдЬреЙрдЗрдирд┐рдВрдЧ</h2>
            <div class="bg-black/30 p-3 rounded-xl mb-4">
                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-1">UPI ID</p>
                <p class="text-lg font-mono font-bold select-all">padhand171@okicici</p>
            </div>
            <div class="flex flex-col items-center">
                <div class="bg-white p-2 rounded-xl w-48 h-48 mb-4 shadow-xl">
                    <img src="https://files.catbox.moe/8g6guc.jpg" alt="QR" class="w-full h-full object-contain">
                </div>
                <button onclick="downloadQR()" class="text-xs bg-slate-800 px-4 py-2 rounded-full border border-slate-700 hover:bg-slate-700 transition">ЁЯУе QR рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ</button>
            </div>
        </div>
        
        <div class="mt-6 text-center">
            <button id="openTC" class="text-xs text-gray-500 underline">рдирд┐рдпрдо рдФрд░ рд╢рд░реНрддреЗрдВ рдкреЭреЗрдВ</button>
        </div>
    </section>

    <!-- Terms Modal -->
    <div id="tcModal" class="modal">
        <div class="bg-slate-900 w-full max-w-sm rounded-3xl overflow-hidden border border-yellow-900/40">
            <div class="p-6 border-b border-slate-800 flex justify-between items-center">
                <h2 class="font-bold">рдирд┐рдпрдо рдФрд░ рд╢рд░реНрддреЗрдВ</h2>
                <button id="closeTC" class="text-2xl">&times;</button>
            </div>
            <div class="p-6 text-sm space-y-3 text-gray-400 max-h-80 overflow-y-auto">
                <p>тАв <strong>рдиреЛ рд░рд┐рдлрдВрдб:</strong> рдкреЗрдореЗрдВрдЯ рдХреЗ рдмрд╛рдж рдкреИрд╕рд╛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред</p>
                <p>тАв <strong>рд╢реЗрдпрд░рд┐рдВрдЧ:</strong> рдХрдВрдЯреЗрдВрдЯ рд╢реЗрдпрд░ рдХрд░рдиреЗ рдкрд░ рдмреИрди рд▓рдЧрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</p>
                <p>тАв <strong>рд╡реИрдзрддрд╛:</strong> рдкреНрд▓рд╛рди 30 рджрд┐рдиреЛрдВ рддрдХ рдорд╛рдиреНрдп рд░рд╣реЗрдЧрд╛ред</p>
            </div>
            <div class="p-4 bg-slate-800/50">
                <button id="agreeTC" class="w-full py-3 bg-yellow-500 text-black font-bold rounded-xl">рд╕рдордЭ рдЧрдпрд╛</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'dps-stories-v2';

        async function init() {
            try {
                await signInAnonymously(auth);
                // Rule 1 & 3: Auth first, then strict path
                const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'siteSettings');
                onSnapshot(docRef, (snap) => {
                    if (snap.exists()) {
                        const data = snap.data();
                        document.getElementById('std-price').innerText = data.prices.standard;
                        document.getElementById('vip-price').innerText = data.prices.vip;
                        document.getElementById('stories-container').innerText = data.stories.join(", ") + " рдФрд░ рдПрдХреНрд╕рдХреНрд▓реВрд╕рд┐рд╡ рдХрд╣рд╛рдирд┐рдпреЛрдВ рдХрд╛ рдард┐рдХрд╛рдирд╛ред";
                    }
                }, (err) => console.log("Waiting for data..."));
            } catch (e) { console.error(e); }
        }

        window.downloadQR = async () => {
            const url = "https://files.catbox.moe/8g6guc.jpg";
            try {
                const res = await fetch(url);
                const blob = await res.blob();
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = 'DPS_Payment_QR.jpg';
                a.click();
            } catch { window.open(url, '_blank'); }
        };

        const modal = document.getElementById('tcModal');
        document.getElementById('openTC').onclick = () => modal.style.display = 'flex';
        document.getElementById('closeTC').onclick = () => modal.style.display = 'none';
        document.getElementById('agreeTC').onclick = () => modal.style.display = 'none';

        init();
    </script>
</body>
</html>

